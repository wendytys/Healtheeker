(function(a){"use strict";a.visualmodoElementsTrigger=a.visualmodoElementsTrigger||{};a.visualmodoElementsTrigger.wp_media=a.visualmodoElementsTrigger.wp_media||[];a.visualmodoElementsTrigger.media_new=function(){var b=a("body");b.on("click",".visualmodo-elements-upload-icon",a.visualmodoElementsTrigger.media_new_activate)};a.visualmodoElementsTrigger.media_new_activate=function(e){e.preventDefault();var c=a(this),b=c.data();b.input_target=a("#"+b.target);var d=wp.media({frame:b.frame,library:{type:b.type},button:{text:b.button},className:b["class"]});d.on("select update insert",function(){a.visualmodoElementsTrigger.media_new_insert(d,b)});d.open()};a.visualmodoElementsTrigger.media_new_insert=function(d,b){var e=d.state(),c=e.get("selection").first().toJSON();b.input_target.val(c.id).trigger("change");a("body").trigger(b.trigger,[c,b])};a(document).ready(function(){a.visualmodoElementsTrigger.media_new();a("body").on("visualmodo_elements_insert_zip",a.visualmodoElementsTrigger.icon_insert);a("body").on("click",".visualmodo_elements_del_icon",a.visualmodoElementsTrigger.icon_remove)});a.visualmodoElementsTrigger.icon_insert=function(e,d,b){b.input_target.val("");var c=a(".visualmodo_elements_iconfont_manager");var f=a("#msg");if(d.subtype!=="zip"){a(".spinner").hide();f.html("<div class='error'><p>Please upload a valid ZIP file.<br/>You can create the file on icomoon.io</p></div>");f.show();setTimeout(function(){f.slideUp()},5000);return}a.ajax({type:"POST",url:ajaxurl,data:{action:"visualmodo_elements_ajax_add_zipped_font",values:d,},beforeSend:function(){a(".spinner").css({opacity:0,display:"block",visibility:"visible",position:"absolute",top:"21px",left:"345px"}).animate({opacity:1})},success:function(g){a(".spinner").hide();if(g.match(/visualmodo_elements_font_added/)){f.html("<div class='updated'><p>Font icon added successfully! Reloading the page... </p></div>");f.show();setTimeout(function(){f.slideUp();location.reload()},5000)}else{f.html("<div class='error'><p>Couldn't add the font.<br/>The script returned the following error: "+g+"</p></div>");f.show();setTimeout(function(){f.slideUp()},5000)}if(typeof console!=="undefined"){console.log(g)}}})};a.visualmodoElementsTrigger.icon_remove=function(f){f.preventDefault();var d=a(this),e=d.parents(".visualmodo-elements-available-font:eq(0)"),c=d.parents(".visualmodo_elements_iconfont_manager:eq(0)"),b=c.find(".visualmodo-elements-available-font"),h=d.data("delete");var g=a("#msg");a.ajax({type:"POST",url:ajaxurl,data:{action:"visualmodo_elements_ajax_remove_zipped_font",del_font:h,},beforeSend:function(){a(".spinner").css({opacity:0,display:"block",visibility:"visible",position:"absolute",top:"21px",left:"345px"}).animate({opacity:1})},error:function(){a(".spinner").hide();g.html("<div class='error'><p>Couldn't remove the font because the server didnâ€™t respond.<br/>Please reload the page, then try again</p></div>");g.show();setTimeout(function(){g.slideUp()},5000)},success:function(i){a(".spinner").hide();if(i.match(/visualmodo_elements_font_removed/)){g.html("<div class='updated'><p>Icon set deleted successfully! Reloading the page...</p></div>");g.show();setTimeout(function(){g.slideUp();location.reload()},5000)}else{g.html("<p><div class='error'><p>Couldn't remove the font.<br/>Reloading the page...</p></div>");g.show();setTimeout(function(){g.slideUp();location.reload()},5000)}if(typeof console!=="undefined"){console.log(i)}},complete:function(i){}})}})(jQuery);